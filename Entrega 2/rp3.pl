dia(segunda, hora(18), hora(20)).
dia(terca, hora(18), hora(20)).
dia(quarta, hora(18), hora(20)).
dia(quinta, hora(18, hora(20))).
dia(sexta, hora(18), hora(20)).
dia(sabado, hora(8), hora(10)).

professor(professor1).
professor(professor2).
professor(professor3).
professor(professor4).
professor(professor5).
professor(professor6).
professor(professor7).
professor(professor8).
professor(professor9).
professor(professor10).
professor(professor11).
professor(professor12).
professor(professor13).
professor(professor14).
professor(professor15).
professor(professor16).
professor(professor17).
professor(professor18).
professor(professor19).
professor(professor20).
professor(professor21).
professor(professor22).

        
disciplina(inovacao_e_criatividade, 3, 2).
disciplina(analise_e_projeto_de_software, 3, 4).
disciplina(resolucao_de_problemas_i, 1, 8).
disciplina(resolucao_de_problemas_iii, 3, 8).
disciplina(algoritmos_e_programacao, 1, 8).
disciplina(arquitetura_e_organizacao_pc, 3, 2).
disciplina(estrutura_de_dados, 3, 4).
disciplina(linguagens_formais, 3, 4).
disciplina(logica_matematica, 1, 4).
disciplina(matematica_discreta, 1, 4).

preferencia(professor1, matematica_discreta,1).
preferencia(professor2, algoritmos_e_programacao,1).
preferencia(professor2, arquitetura_e_organizacao_pc,1).
preferencia(professor3, linguagens_formais,1).
preferencia(professor3, logica_matematica,1).
preferencia(professor3, matematica_discreta,1).
preferencia(professor4, arquitetura_e_organizacao_pc,1).
preferencia(professor4, estrutura_de_dados,1).
preferencia(professor4, algoritmos_e_programacao,1).
preferencia(professor5, algoritmos_e_programacao,1).
preferencia(professor6, resolucao_de_problemas_iii,1).
preferencia(professor7, algoritmos_e_programacao,1).
preferencia(professor7, arquitetura_e_organizacao_pc,1).
preferencia(professor8, algoritmos_e_programacao,1).
preferencia(professor8, arquitetura_e_organizacao_pc,1).
preferencia(professor8, estrutura_de_dados,1).
preferencia(professor8, logica_matematica,1).
preferencia(professor9, inovacao_e_criatividade,1).
preferencia(professor11, resolucao_de_problemas_i,1).
preferencia(professor12, analise_e_projeto_de_software,1).
preferencia(professor12, algoritmos_e_programacao,1).
preferencia(professor13, analise_e_projeto_de_software,1).
preferencia(professor13, resolucao_de_problemas_i,1).
preferencia(professor14, algoritmos_e_programacao,1).
preferencia(professor14, estrutura_de_dados,1).
preferencia(professor15, analise_e_projeto_de_software,1).
preferencia(professor15, resolucao_de_problemas_i,1).
preferencia(professor15, resolucao_de_problemas_iii,1).
preferencia(professor16, linguagens_formais,1).
preferencia(professor16, logica_matematica,1).
preferencia(professor16, matematica_discreta,1).
preferencia(professor17, resolucao_de_problemas_i,1).
preferencia(professor18, algoritmos_e_programacao,1).
preferencia(professor18, estrutura_de_dados,1).
preferencia(professor19, algoritmos_e_programacao,1).
preferencia(professor19, estrutura_de_dados,1).
preferencia(professor19, estrutura_de_dados,1).
preferencia(professor20, resolucao_de_problemas_i,1).
preferencia(professor20, algoritmos_e_programacao,1).
preferencia(professor21, algoritmos_e_programacao,1).
preferencia(professor22, resolucao_de_problemas_i,1).

preferencia(professor1, algoritmos_e_programacao,2).
preferencia(professor1, estruturas_de_dados,2).
preferencia(professor1, logica_matematica,2).
preferencia(professor2, estruturas_de_dados,2).
preferencia(professor2, logica_matematica,2).
preferencia(professor2, matematica_discreta,2).
preferencia(professor5, resolucao_de_problemas_i,2).
preferencia(professor7, estruturas_de_dados,2).
preferencia(professor12, resolucao_de_problemas_i,2).
preferencia(professor12, estruturas_de_dados,2).
preferencia(professor13, algoritmos_e_programacao,2).
preferencia(professor14, analise_e_projeto_de_software,2).
preferencia(professor14, resolucao_de_problemas_i,2).
preferencia(professor17, analise_e_projeto_de_software,2).
preferencia(professor20, analise_e_projeto_de_software,2).
preferencia(professor20, resolucao_de_problemas-iii,2).
preferencia(professor21, estruturas_de_dados,2).
preferencia(professor22, inovacao_e_criatividade,2).
preferencia(professor22, analise_e_projeto_de_software,2).

preferencia(professor10, inovacao_e_criatividade,3).
preferencia(professor12, inovacao_e_criatividade,3).
preferencia(professor5, analise_e_projeto_de_software,3).
preferencia(professor6, analise_e_projeto_de_software,3).
preferencia(professor7, analise_e_projeto_de_software,3).
preferencia(professor11, analise_e_projeto_de_software,3).
preferencia(professor12, inovacao_e_criatividade,3).
preferencia(professor2, resolucao_de_problemas_i,3).
preferencia(professor9, resolucao_de_problemas_i,3).
preferencia(professor12, resolucao_de_problemas_iii,3).
preferencia(professor17, resolucao_de_problemas_iii,3).
preferencia(professor21, arquitetura_e_organizacao_pc,3).
preferencia(professor5, estruturas_de_dados,3).
preferencia(professor6, estruturas_de_dados,3).
preferencia(professor10, estruturas_de_dados,3).
preferencia(professor13, estruturas_de_dados,3).
preferencia(professor15, estruturas_de_dados,3).
preferencia(professor20, estruturas_de_dados,3).
preferencia(professor19, logica_matematica,3).

preferencia(professor2, inovacao_e_criatividade,4).
preferencia(professor4, logica_matematica,4).
preferencia(professor5, inovacao_e_criatividade,4).
preferencia(professor5, resolucao_de_problemas_iii,4).
preferencia(professor5, arquitetura_organizacao,4).
preferencia(professor5, logica_matematica,4).
preferencia(professor5, matematica_discreta,4).
preferencia(professor6, inovacao_e_criatividade,4).
preferencia(professor8, linguagens_formais,4).
preferencia(professor8, matematica_discreta,4).
preferencia(professor10, resolucao_de_problemas_i,4).
preferencia(professor10, resolucao_de_problemas_iii,4).
preferencia(professor12, linguagens_formais,4).
preferencia(professor13, resolucao_de_problemas_iii,4).
preferencia(professor14, resolucao_de_problemas_iii,4).
preferencia(professor17, linguagens_formais,4).
preferencia(professor20, matematica_discreta,4).
preferencia(professor21, analise_e_projeto_de_software,4).

preferencia(professor1, inovacao_e_criatividade,5).
preferencia(professor3, inovacao_e_criatividade,5).
preferencia(professor4, inovacao_e_criatividade,5).
preferencia(professor7, inovacao_e_criatividade,5).
preferencia(professor8, inovacao_e_criatividade,5).
preferencia(professor11, inovacao_e_criatividade,5).
preferencia(professor13, inovacao_e_criatividade,5).
preferencia(professor14, inovacao_e_criatividade,5).
preferencia(professor15, inovacao_e_criatividade,5).
preferencia(professor16, inovacao_e_criatividade,5).
preferencia(professor17, inovacao_e_criatividade,5).
preferencia(professor18, inovacao_e_criatividade,5).
preferencia(professor19, inovacao_e_criatividade,5).
preferencia(professor20, inovacao_e_criatividade,5).
preferencia(professor21, inovacao_e_criatividade,5).
preferencia(professor1, analise_e_projeto_de_software,5).
preferencia(professor2, analise_e_projeto_de_software,5).
preferencia(professor3, analise_e_projeto_de_software,5).
preferencia(professor4, analise_e_projeto_de_software,5).
preferencia(professor8, analise_e_projeto_de_software,5).
preferencia(professor9, analise_e_projeto_de_software,5).
preferencia(professor10, analise_e_projeto_de_software,5).
preferencia(professor16, analise_e_projeto_de_software,5).
preferencia(professor18, analise_e_projeto_de_software,5).
preferencia(professor19, analise_e_projeto_de_software,5).
preferencia(professor1, resolucao_de_problemas_i,5).
preferencia(professor3, resolucao_de_problemas_i,5).
preferencia(professor4, resolucao_de_problemas_i,5).
preferencia(professor5, resolucao_de_problemas_i,5).
preferencia(professor8, resolucao_de_problemas_i,5).
preferencia(professor16, resolucao_de_problemas_i,5).
preferencia(professor18, resolucao_de_problemas_i,5).
preferencia(professor19, resolucao_de_problemas_i,5).
preferencia(professor1, resolucao_de_problemas_iii,5).
preferencia(professor2, resolucao_de_problemas_iii,5).
preferencia(professor3, resolucao_de_problemas_iii,5).
preferencia(professor6, resolucao_de_problemas_iii,5).
preferencia(professor7, resolucao_de_problemas_iii,5).
preferencia(professor8, resolucao_de_problemas_iii,5).
preferencia(professor9, resolucao_de_problemas_iii,5).
preferencia(professor11, resolucao_de_problemas_iii,5).
preferencia(professor16, resolucao_de_problemas_iii,5).
preferencia(professor18, resolucao_de_problemas_iii,5).
preferencia(professor19, resolucao_de_problemas_iii,5).
preferencia(professor22, resolucao_de_problemas_iii,5).
preferencia(professor1, arquitetura_e_organizacao_pc,5).
preferencia(professor3, arquitetura_e_organizacao_pc,5).
preferencia(professor5, arquitetura_e_organizacao_pc,5).
preferencia(professor6, arquitetura_e_organizacao_pc,5).
preferencia(professor9, arquitetura_e_organizacao_pc,5).
preferencia(professor18, arquitetura_e_organizacao_pc,5).
preferencia(professor19, arquitetura_e_organizacao_pc,5).
preferencia(professor20, arquitetura_e_organizacao_pc,5).
preferencia(professor22, arquitetura_e_organizacao_pc,5).
preferencia(professor4, matematica_discreta,5).
preferencia(professor6, matematica_discreta,5).
preferencia(professor7, matematica_discreta,5).
preferencia(professor9, matematica_discreta,5).
preferencia(professor10, matematica_discreta,5).
preferencia(professor11, matematica_discreta,5).
preferencia(professor12, matematica_discreta,5).
preferencia(professor13, matematica_discreta,5).
preferencia(professor14, matematica_discreta,5).
preferencia(professor15, matematica_discreta,5).
preferencia(professor17, matematica_discreta,5).
preferencia(professor18, matematica_discreta,5).
preferencia(professor19, matematica_discreta,5).
preferencia(professor21, matematica_discreta,5).
preferencia(professor22, matematica_discreta,5).
preferencia(professor9, algoritmos_e_programacao,5).
preferencia(professor11, algoritmos_e_programacao,5).
preferencia(professor9, algoritmos_e_programacao,5).
preferencia(professor16, algoritmos_e_programacao,5).
preferencia(professor17, algoritmos_e_programacao,5).
preferencia(professor3, estruturas_de_dados,5).
preferencia(professor9, estruturas_de_dados,5).
preferencia(professor11, estruturas_de_dados,5).
preferencia(professor16, estruturas_de_dados,5).
preferencia(professor17, estruturas_de_dados,5).
preferencia(professor1, linguagens_formais,5).
preferencia(professor2, linguagens_formais,5).
preferencia(professor3, linguagens_formais,5).
preferencia(professor4, linguagens_formais,5).
preferencia(professor5, linguagens_formais,5).
preferencia(professor6, linguagens_formais,5).
preferencia(professor7, linguagens_formais,5).
preferencia(professor9, linguagens_formais,5).
preferencia(professor10, linguagens_formais,5).
preferencia(professor11, linguagens_formais,5).
preferencia(professor13, linguagens_formais,5).
preferencia(professor13, linguagens_formais,5).
preferencia(professor14, linguagens_formais,5).
preferencia(professor15, linguagens_formais,5).
preferencia(professor18, linguagens_formais,5).
preferencia(professor19, linguagens_formais,5).
preferencia(professor20, linguagens_formais,5).
preferencia(professor21, linguagens_formais,5).
preferencia(professor22, linguagens_formais,5).
preferencia(professor6, logica_matematica,5).
preferencia(professor7, logica_matematica,5).
preferencia(professor9, logica_matematica,5).
preferencia(professor10, logica_matematica,5).
preferencia(professor11, logica_matematica,5).
preferencia(professor12, logica_matematica,5).
preferencia(professor13, logica_matematica,5).
preferencia(professor14, logica_matematica,5).
preferencia(professor15, logica_matematica,5).
preferencia(professor18, logica_matematica,5).
preferencia(professor20, logica_matematica,5).
preferencia(professor21, logica_matematica,5).
preferencia(professor22, logica_matematica,5).

%Criar um MAPA, colocar um professor X e as disciplinas [Y|Z], 
%SE o professor X tem preferencia 1 na disciplina Y 
%E SE a disciplina ainda NAO está em um MAPA com outro professor

verifica_hora(X, Y, Z) :- dia(X, Y, Z).

verifica_dia(X, Y, Z) :-
    verifica_hora(X, Y, Z),
    ((X = sabado, (Y,Z) \= (dezoito, vinte));
    (X \= sabado, (Y,Z) \= (oito, dez))).

%um goal pra conseguir usar no findall, retorna todos prof X
listar_prof(X) :- professor(X).

% X = nome do prof, W = nome da disciplina, Y = carga da disciplina
% 1 ta setado pro prof pega só a disciplina com preferencia 1
carga_horaria(X, W, Y) :- alocar(X, [W|J]),
    preferencia(X, W, 1),
disciplina(W, _ , Y).

%retorna cada elemento da lista de professores como X
myList(X) :- findall(X, carga_horaria(X,W,Y), L), %para cada elemento X da lista ele cria uma nova lista
member(X, L). %retorna cada elemento de L

%retorna cada elemento da lista de professores como X
myList2(X) :- findall(W, carga_horaria(X,W,Y), L),
findall(X,carga_horaria(X,W,Y),L), %para cada elemento X da lista ele cria uma nova lista
member(W,X, L). %retorna cada elemento de L


% myListAloc(x) :- findall(X, alocarProf(X,Y), L).

%chama a soma de cargas através de cada elemento da lista (soma a carga horaria de cada prof)
total_carga(L) :- myList(L),
    %chama a proxima regra
    total_carga(L, C),
    %printa a carga quando sai da chamada da regra total_carga
    write(C).

%pega cada elemento X da carga horaria, coloca em uma lista e soma (a carga horaria da disciplina)
total_carga(P, Carga) :- 
    %para cada X da carga_horaria(_,_,X), ele coloca em uma lista L!
    findall(X, carga_horaria(P, Y, X), L1),
    %soma todos elementos da lista L1 e coloca na Carga
    sumlist(L1, Carga).

sumlist([], 0).

sumlist([Head | Tail], Sum) :-
    sumlist(Tail, SumRest),
    ((Head + SumRest =< 12) ->
    (Sum is Head + SumRest);
    (Sum is SumRest)).


addElement(X, [], [X]). 
addElement(X, [Y | Rest], [X,Y | Rest]) :- X @< Y, !.
addElement(X, [Y | Rest1], [Y | Rest2]) :- addElement(X, Rest1, Rest2).


alocar_preferencia(X, Y) :-
    preferencia(X, Y, W),
    W=1.

list_length([]     , 0 ).
list_length([_|Xs] , L ) :- list_length(Xs,N) , L is N+1 .

member_classic(X, [X|Xs]).
member_classic(X, [Y|Ys]) :-
    member_classic(X, Ys).


% Até aqui funcionaaaa

alocar(X, L, F) :-
    professor(X),
    % Criar um array daqui

    findall(Y, (alocar_preferencia(X, Y)), L),
    L \= [], 
    findall(E, member(E, L), L1),
    L1 = [LH| LT],
    verifica_array(L1, F).

verifica_array([H|T], [F]) :-
    (( \+ memberchk(H, F)) -> addElement(H, F, F1));
    verifica_array(T, F1). 
    % addElement(X,[L],Z),
    % Z = [Hz|Tz],
    % Tz = [Hn|Tn],
     (memberchk(algoritmos_e_programacao, Hn) -> write('É membro'); write('Não é membro')).
    



    % write('Valor de Agahz: '),
    % write(Hz),nl,
    % write('Valor de Tz: '),
    % write(Tz),nl,
    % write('Valor de Z: '),
    % write(Z),nl,
    % write('Valor de Hn: '),
    % write(Hn),nl,
    % write(memberchk(algoritmos_e_programacao, Hn)),nl,